{% extends "base.html" %}
{% block title %}1:1 ì±„íŒ…{% endblock %}

{% block content %}
<h2>1:1 ì±„íŒ… ì‹œì‘</h2>
<p><strong>ìƒëŒ€ë°©:</strong> {{ partner_name | e }}</p>
<a href="{{ url_for('transfer_page', user_id=user.id) }}" class="btn-transfer">
  ğŸ’¸ ì†¡ê¸ˆí•˜ê¸°
</a>

<form method="post">
  <label for="message">ë©”ì‹œì§€ ì…ë ¥</label>
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">  
  <input type="text" id="message" name="message" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”" maxlength="300" autocomplete="off" required />
  <button type="submit">ì „ì†¡</button>
</form>

<div id="chat-window" style="margin: 20px 0; padding: 15px; background: #f9f9f9; border-radius: 8px;">
  {% for m in messages %}
    <p>
      <strong>{{ 'ë‚˜' if m.sender_id == session['user_id'] else 'ìƒëŒ€' }}:</strong>
      {{ m.message | e }}
      <small style="color: #999;">({{ m.timestamp | e }})</small>
    </p>
  {% else %}
    <p style="color: #888;">ì•„ì§ ë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
  {% endfor %}
</div>
{% endblock %}
